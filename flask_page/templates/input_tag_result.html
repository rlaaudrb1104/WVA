<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WVA Tools</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .grid-cell {
        width: 100px;
        height: 100px;
      }

      h2{
        font-size: 1.125rem;
        line-height: 1.75rem;
      }

      .page-info {
        margin-bottom: 20px;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-900 font-sans">
    <header class="bg-white shadow shadow-lg relative">
      <nav
        class="container mx-auto px-6 py-3 flex justify-between items-center"
      >
        <a href="/" class="text-3xl font-bold text-lime-600">WVA</a>
        <div class="space-x-4">
          <a
            href="{{ url_for('input_tag_bp.input_tag') }}"
            class="text-gray-500 hover:text-lime-600 font-bold"
            >Site-Info Crawl</a
          >
          <a
            href="/directory-listing"
            class="text-gray-500 hover:text-lime-600 font-bold"
            >File Vulnerability</a
          >
          <a
            href="/sql-injection"
            class="text-gray-500 hover:text-lime-600 font-bold"
            >Sql Injection</a
          >
          <a href="{{ url_for('XSS_Bypass_bp.XSS') }}" class="text-gray-500 hover:text-lime-600 font-bold"
            >XSS</a
          >
        </div>
      </nav>
    </header>
    <h1 class="font-bold text-lime-600 text-3xl flex justify-center m-5">
      Site-Info Crawl Result
    </h1>
    <p class="flex justify-center text-gray-500">
      Result of crawling the site with the dfs algorithm.
    </p>
    <div class="flex flex-row justify-center">
      <div class="flex flex-col mx-5 justify-center">
        <a
          href="/input_tag"
          class="hover:bg-lime-800 my-2 bg-lime-600 font-bold text-gray-100 px-4 py-2 rounded-full hover:shadow hover:shadow-black justify-center text-center"
          >Go back to Site-Info Crawl Page</a
        >
        <a
          href="/"
          class="hover:bg-lime-800 mt-2 mb-4 bg-lime-600 font-bold text-gray-100 px-4 py-2 rounded-full hover:shadow hover:shadow-black justify-center text-center"
          >Go back to Home Page</a
        >
      </div>
    </div>
    <hr  />
    <br  />

    {% for page_info in pages_info %}
    <div class="page-info">
      <p class="font-bold text-lg rounded-md px-4 py-2 mx-10 cursor-pointer" 
      onclick="toggleContent('content_{{ loop.index }}')">
      ‚ñ´Ô∏è {{ page_info['url'] }}
      </p>
      <hr />
      <div id="content_{{ loop.index }}" class="hidden bg-lime-100 border-lime-200 border-2 p-2 rounded-md mx-10 mt-5">
        <a href="{{ page_info['url'] }}" target="_blank" rel="noopener noreferrer" class="my-2"><strong>üîó URL:</strong> {{ page_info['url'] }}</a>
        <div>
          <details><summary class="my-2 font-bold cursor-pointer">‚úèÔ∏è Input Tags</summary>
          {% if page_info['input_tags'] %} {% for input_tag in
          page_info['input_tags'] %}
          <p class="my-2">üçÄ {{ input_tag }}</p>
          <hr  />
          {% endfor %}</details> {% else %}
          <p class="mb-4">No Input Tags found.</p></details>
          {% endif %}
        </div>
        <div>
          <details><summary class="my-2 font-bold cursor-pointer">üìí Comments</summary>
          {% if page_info['comments'] %} {% for comment in page_info['comments']
          %}
          <p class="mb-4">üçÄ {{ comment }}</p>
          <hr  />
          {% endfor %}</details> {% else %}
          <p class="mb-4">No Comments found.</p></details>
          {% endif %}
        </div>

        <div>
          <details><summary class="my-2 font-bold cursor-pointer">üí¨ Form Method</summary>
          {% if page_info['forms'] %} {% for form_info in page_info['forms']
          %}
          <div class="mb-5">
            <h4 class="text-lg mb-2">Form Action: {{ form_info['action'] }}</h4>
            <p class="mb-2">Method: {{ form_info['method'] }}</p>
            <div class="flex">
              <div class="mr-5">
                <h5 class="text-md mb-2">GET Request:</h5>
                <p>Status Code: {{ form_info['response']['GET']['status_code'] }}</p>
                <p>Response Content: {{ form_info['response']['GET']['content'] }}</p>
              </div>
              <div>
                <h5 class="text-md mb-2">POST Request:</h5>
                <p>Status Code: {{ form_info['response']['POST']['status_code'] }}</p>
                <p>Response Content: {{ form_info['response']['POST']['content'] }}</p>
              </div>
            </div>
          </div>
          {% endfor %}
        {% else %}
          <p>No forms found.</p>
        {% endif %}

      </div>
    </div>
    {% endfor %}

    <script>
      function toggleContent(id) {
        var content = document.getElementById(id)
        content.classList.toggle("hidden")
      }
    </script>
  </body>
    <img src="{{ url_for('static', filename='img/Arrow.png') }}", class="shadow shadow-black rounded-lg cursor-pointer fixed bottom-5 right-4 animate-bounce size-16" onclick="javascript:window.scrollTo(0,0);"></img>

</html>
